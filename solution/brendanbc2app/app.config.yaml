application:
  actions: actions
  runtimeManifest:
    packages:
      brendanbc2app:
        license: Apache-2.0
        actions:
          generic:
            function: actions/generic/index.js
            web: 'yes'
            runtime: nodejs:22
            inputs:
              LOG_LEVEL: debug
            annotations:
              require-adobe-auth: true
              final: true
          get-umapi-users:
            function: actions/get-umapi-users/index.js
            web: 'yes'
            runtime: nodejs:22
            inputs:
              LOG_LEVEL: debug
            annotations:
              require-adobe-auth: false
              final: true
          update-eds-access:
            function: actions/update-eds-access/index.js
            web: 'yes'
            runtime: nodejs:22
            inputs:
              LOG_LEVEL: debug
            annotations:
              require-adobe-auth: false
              final: true
          sync-umapi-to-eds:
            function: actions/sync-umapi-to-eds/index.js
            web: 'yes'
            runtime: nodejs:22
            inputs:
              LOG_LEVEL: debug
            annotations:
              require-adobe-auth: false
              final: true
          worker:
            function: actions/worker/index.js
            web: 'yes'
            runtime: nodejs:22
            limits:
              concurrency: 10
              memory: 1024
              timeout: 3600000
            inputs:
              AZURE_OPENAI_API_KEY: $AZURE_OPENAI_API_KEY
              AZURE_OPENAI_ENDPOINT: $AZURE_OPENAI_ENDPOINT
              AEM_TARGET_URL: $AEM_TARGET_URL
              GDAM_TOKEN: $GDAM_TOKEN
            annotations:
              require-adobe-auth: true   
          ai-asset-tagging:
            function: actions/ai-asset-tagging/index.js
            web: 'yes'
            runtime: nodejs:22
            limits:
              concurrency: 5
              memory: 1024
              timeout: 300000
            inputs:
              AZURE_OPENAI_API_KEY: $AZURE_OPENAI_API_KEY
              AZURE_OPENAI_ENDPOINT: $AZURE_OPENAI_ENDPOINT
              AEM_TARGET_URL: $AEM_TARGET_URL
              GDAM_TOKEN: $GDAM_TOKEN
              LOG_LEVEL: $LOG_LEVEL
            annotations:
              require-adobe-auth: false
        inputs:
          # EDS configuration
          EDS_ORG: $EDS_ORG
          EDS_SITE: $EDS_SITE
          EDS_ADMIN_TOKEN: $EDS_ADMIN_TOKEN
          # UMAPI proxy
          UMAPI_PROXY_URL: $UMAPI_PROXY_URL
          AZURE_OPENAI_API_KEY: $AZURE_OPENAI_API_KEY
          AZURE_OPENAI_ENDPOINT: $AZURE_OPENAI_ENDPOINT
          AEM_TARGET_URL: $AEM_TARGET_URL
          GDAM_TOKEN: $GDAM_TOKEN
          LOG_LEVEL: $LOG_LEVEL